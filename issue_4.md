# Issue 4: セキュリティの堅牢性向上

## 概要
SupabaseのRow Level Security (RLS) を活用し、データベースとストレージへの不正アクセスを防止する。また、基本的なセキュリティ対策を講じる。

## 詳細タスク

### 1. Database設計とRLS設定
- [ ] `inference_logs` テーブル（ユーザーID, 画像パス, 推論結果, 日時）を作成するSQLを用意する。
- [ ] **RLSポリシーの適用**:
    - `auth.uid() = user_id` の条件を追加し、ユーザーは自分の推論履歴のみを参照・追加できるように制限する。
    - 匿名ユーザーからのアクセスを完全にブロックする。

### 2. Storage設計とRLS設定
- [ ] 画像保存用バケット `xray-images` を作成する。
- [ ] **RLSポリシーの適用**:
    - バケット内のパスを `private/{user_id}/...` のように構成し、該当`user_id`を持つ認証済みユーザーのみがアップロード・参照できるようにポリシーを設定する。

### 3. その他のセキュリティ対策
- [ ] API通信のHTTPS化（本番環境想定だが、意識した設計にする）。
- [ ] フロントエンドでの入力バリデーション（画像形式、サイズ制限）。
- [ ] `.env` ファイルの適切な管理（APIキーなどをリポジトリにコミットしない）。

## 完了条件
- 別のユーザーのデータにアクセスしようとした際、Supabase側で拒否されることが確認できること。
- 認証されていない状態でテーブルやストレージにアクセスできないこと。
